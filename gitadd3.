# Historia de Usuario #1: Saludo Personalizado

import re
import random

class ChatBot:
    def __init__(self):
        self.user_name = None
        self.greeting_patterns = [
            r'\b(hola|hi|hello|buenos dÃ­as|buenas tardes|buenas noches|hey)\b',
            r'\b(saludos|quÃ© tal|como estas|cÃ³mo estÃ¡s)\b'
        ]
    
    def handle_greeting(self, message):
        """Maneja los saludos del usuario"""
        for pattern in self.greeting_patterns:
            if re.search(pattern, message.lower()):
                # Extraer nombre si se menciona
                name_match = re.search(r'soy (\w+)|me llamo (\w+)|mi nombre es (\w+)', message.lower())
                if name_match:
                    self.user_name = name_match.group(1) or name_match.group(2) or name_match.group(3)
                    self.user_name = self.user_name.capitalize()
                
                # Saludo personalizado
                if self.user_name:
                    greetings = [
                        f"Â¡Hola {self.user_name}! Â¿En quÃ© puedo ayudarte hoy?",
                        f"Â¡Buenos dÃ­as {self.user_name}! Estoy aquÃ­ para asistirte.",
                        f"Â¡Hola {self.user_name}! Â¿QuÃ© necesitas saber?"
                    ]
                else:
                    greetings = [
                        "Â¡Hola! Soy tu asistente virtual. Â¿En quÃ© puedo ayudarte?",
                        "Â¡Buenos dÃ­as! Â¿CÃ³mo puedo asistirte hoy?",
                        "Â¡Hola! Estoy aquÃ­ para ayudarte. Â¿QuÃ© necesitas?"
                    ]
                
                return random.choice(greetings)
        
        # Respuesta por defecto
        return "Hola, no estoy seguro de entender. Â¿PodrÃ­as saludarme de otra manera?"
    
    def get_response(self, message):
        """FunciÃ³n principal que procesa el mensaje"""
        return self.handle_greeting(message)

# FunciÃ³n principal para probar
def main():
    bot = ChatBot()
    print("ðŸ¤– ChatBot - Historia 1: Saludo Personalizado")
    print("Prueba saludar de diferentes maneras...")
    print("="*50)
    
    while True:
        try:
            user_input = input("\nðŸ‘¤ TÃº: ").strip()
            if user_input.lower() in ['exit', 'salir', 'quit']:
                print("ðŸ¤– Bot: Â¡Hasta luego!")
                break
                
            response = bot.get_response(user_input)
            print(f"ðŸ¤– Bot: {response}")
            
        except KeyboardInterrupt:
            print("\nðŸ¤– Bot: Â¡Hasta luego!")
            break

if __name__ == "__main__":
    main()
